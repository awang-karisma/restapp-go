basePath: /
definitions:
  api.deleteMessageRequest:
    properties:
      message_id:
        type: string
      sender:
        description: optional original sender (for admin delete)
        type: string
      to:
        type: string
    type: object
  api.qrResponse:
    properties:
      qr_base64:
        type: string
    type: object
  api.sendMediaRequest:
    properties:
      android_app_store_link:
        type: string
      caption:
        description: optional caption/description
        type: string
      data_base64:
        description: base64 encoded bytes of the media
        type: string
      disable_sticker_exif:
        type: boolean
      file_name:
        description: used for documents
        type: string
      ios_app_store_link:
        type: string
      mime_type:
        description: e.g. image/png
        type: string
      sticker_pack_id:
        type: string
      sticker_pack_name:
        type: string
      sticker_pack_publisher:
        type: string
      to:
        type: string
      type:
        description: image, video, audio, ptt, file, sticker, sticker_lottie
        type: string
    type: object
  api.sendReactionRequest:
    properties:
      emoji:
        type: string
      message_id:
        type: string
      sender:
        type: string
      to:
        type: string
    type: object
  api.sendResponse:
    properties:
      ID:
        type: string
      MessageIDs:
        items:
          type: string
        type: array
    type: object
  api.sendTextRequest:
    properties:
      message:
        type: string
      to:
        type: string
    type: object
  api.setWebhookRequest:
    properties:
      url:
        type: string
    type: object
info:
  contact: {}
  description: REST API for sending/receiving WhatsApp messages via whatsmeow.
  title: WhatsApp Relay API
  version: "1.0"
paths:
  /delete-message:
    post:
      consumes:
      - application/json
      description: Sends a revoke/delete for a message (works for text and media)
      parameters:
      - description: Delete payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.deleteMessageRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Delete accepted
          schema:
            $ref: '#/definitions/api.sendResponse'
        "400":
          description: Invalid input
          schema:
            type: string
        "500":
          description: Delete failed
          schema:
            type: string
        "503":
          description: WhatsApp not connected
          schema:
            type: string
      summary: Delete a message
      tags:
      - messages
  /healthz:
    get:
      description: Returns OK when WhatsApp client is connected
      produces:
      - text/plain
      responses:
        "200":
          description: ok
          schema:
            type: string
        "503":
          description: whatsapp not connected
          schema:
            type: string
      summary: Health check
      tags:
      - health
  /media:
    get:
      description: Downloads and decrypts media for a previously received message
        ID
      parameters:
      - description: Message ID from webhook payload
        in: query
        name: id
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: Media bytes
          schema:
            type: file
        "404":
          description: Media not found in cache/DB
          schema:
            type: string
        "500":
          description: Download/decrypt failed
          schema:
            type: string
      summary: Fetch media by message ID
      tags:
      - media
  /qr:
    get:
      description: Returns the current login QR code if not logged in. Defaults to
        PNG image. Use `type=json` to get base64.
      parameters:
      - default: image
        description: image|json
        in: query
        name: type
        type: string
      produces:
      - application/json
      - image/png
      responses:
        "200":
          description: Base64 QR when type=json
          schema:
            $ref: '#/definitions/api.qrResponse'
        "404":
          description: QR not available
          schema:
            type: string
        "409":
          description: Session already exists
          schema:
            type: string
      summary: Get login QR code
      tags:
      - auth
  /send-media:
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: Supports JSON (base64) or multipart/form-data uploads
      parameters:
      - description: Send media payload (JSON/base64)
        in: body
        name: request
        schema:
          $ref: '#/definitions/api.sendMediaRequest'
      - description: Sticker pack ID (sticker only)
        in: query
        name: sticker_pack_id
        type: string
      - description: Sticker pack name (sticker only)
        in: query
        name: sticker_pack_name
        type: string
      - description: Sticker pack publisher (sticker only)
        in: query
        name: sticker_pack_publisher
        type: string
      - description: Android store link (sticker only)
        in: query
        name: android_app_store_link
        type: string
      - description: iOS store link (sticker only)
        in: query
        name: ios_app_store_link
        type: string
      - description: Sticker pack ID (sticker only, multipart)
        in: formData
        name: sticker_pack_id
        type: string
      - description: Sticker pack name (sticker only, multipart)
        in: formData
        name: sticker_pack_name
        type: string
      - description: Sticker pack publisher (sticker only, multipart)
        in: formData
        name: sticker_pack_publisher
        type: string
      - description: Android store link (sticker only, multipart)
        in: formData
        name: android_app_store_link
        type: string
      - description: iOS store link (sticker only, multipart)
        in: formData
        name: ios_app_store_link
        type: string
      - description: Disable WebP EXIF embedding for sticker (multipart)
        in: formData
        name: disable_sticker_exif
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: Media accepted
          schema:
            $ref: '#/definitions/api.sendResponse'
        "400":
          description: Invalid input
          schema:
            type: string
        "500":
          description: Send failed
          schema:
            type: string
        "503":
          description: WhatsApp not connected
          schema:
            type: string
      summary: Send media (image/video/audio/ptt/document/sticker/sticker_lottie)
      tags:
      - media
  /send-reaction:
    post:
      consumes:
      - application/json
      description: Sends a reaction to an existing WhatsApp message
      parameters:
      - description: Reaction payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.sendReactionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Reaction accepted
          schema:
            $ref: '#/definitions/api.sendResponse'
        "400":
          description: Invalid input
          schema:
            type: string
        "500":
          description: Send failed
          schema:
            type: string
        "503":
          description: WhatsApp not connected
          schema:
            type: string
      summary: Send a reaction
      tags:
      - messages
  /send-text:
    post:
      consumes:
      - application/json
      description: Sends a plain text WhatsApp message
      parameters:
      - description: Send text payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.sendTextRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Message accepted
          schema:
            $ref: '#/definitions/api.sendResponse'
        "400":
          description: Invalid input
          schema:
            type: string
        "500":
          description: Send failed
          schema:
            type: string
        "503":
          description: WhatsApp not connected
          schema:
            type: string
      summary: Send a text message
      tags:
      - messages
  /webhook:
    post:
      consumes:
      - application/json
      description: Sets the HTTP webhook URL for incoming WhatsApp messages
      parameters:
      - description: Webhook URL payload
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.setWebhookRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Status and webhook URL
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Invalid input
          schema:
            type: string
      summary: Configure webhook URL
      tags:
      - webhook
swagger: "2.0"
